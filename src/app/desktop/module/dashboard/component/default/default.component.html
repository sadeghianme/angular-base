<div class="dashboard">
  <div class="dashboard-header">
    <div class="dashboard-header-left">
      <div class="dashboard-header-left-box" *ngFor="let item of headerWidgets">
        <app-header-widget [data]="item"></app-header-widget>
      </div>
<!--      <i style="margin-left: 8px" class="material-icons">add</i>-->
    </div>
    <div class="dashboard-header-right">
      <i style="margin-right: 8px" class="material-icons material-icons-btn">local_printshop</i>
      <i style="margin-right: 8px" class="material-icons material-icons-btn">insert_drive_file</i>
      <i style="margin-right: 8px" class="material-icons material-icons-btn">more_horiz</i>
    </div>
  </div>
  <div class="dashboard-body">
    <div class="dashboard-body-left">
      <div class="dashboard-body-left-box" *ngFor="let item of summeries">
        <div class="dashboard-body-left-box-part1">
          <label>{{item.title}}</label>
          <label [style.color]="item.kpiStatus">{{item.kpiValue}}</label>
        </div>
        <div class="dashboard-body-left-box-part2">
          <label [style.color]="item.trendStatus">{{item.trend}}
            <i class="material-icons">arrow_drop_up</i>
          </label>
          <label>Target {{item.target}}</label>
          <label>Achievement {{item.achievement}}</label>
        </div>
      </div>
<!--      <div class="dashboard-body-menu-item"-->
<!--        *ngFor="let menu of menus">-->
<!--        <label>{{lang.ln(menu.name)}}</label>-->
<!--        <div class="dashboard-body-menu-subItem"-->
<!--          *ngFor="let subMenu of menu.children">-->
<!--          {{lang.ln(subMenu.name)}}-->
<!--          <i *ngIf="subMenu.children && subMenu.children.length" class="material-icons">arrow_right</i>-->
<!--        </div>-->
<!--      </div>-->
<!--      <app-button btnType="simple" [value]="'New Dashboard'" (clickButton)="addDashboardModal=true"></app-button>-->
    </div>
    <div class="dashboard-body-grid" cdkDropListGroup>
      <div cdkDropList
           [cdkDropListData]="i"
           *ngFor="let item of widgets; let i = index">
        <div *ngIf="item.visible"
             class="dashboard-widget-box"
             [class.dashboard-widget-box-max]="item.maximize"
             cdkDrag
             [cdkDragData]="i"
             (cdkDragDropped)="entered($event)"
             [ngStyle]="{'width': item.width, 'height': item.height}">
          <!--        <div class="example-custom-placeholder" *cdkDragPlaceholder></div>-->
          <app-widget-box *ngIf="item.data"
            [data]="item"
            [title]="item.title"
            (maximizeClick)="maximizeWidget(item)"
            (removeClick)="removeItem(item)">
            <div widget-buttons>
              <i class="material-icons material-icons-widget" *ngIf="!item.maximize" cdkDragHandle>open_with</i>
            </div>
          </app-widget-box>
        </div>
      </div>
    </div>
    <div class="dashboard-body-right">
      <div class="dashboard-chat-btn">
        <div class="dashboard-chat-icon" (click)="chatState='bot'">
          <i  [style.color]="chatState==='bot'?'darkred':null"  class="fas fa-robot"></i>
        </div>
        <div class="dashboard-chat-icon" (click)="chatState='viber'">
          <i [style.color]="chatState==='viber'?'rebeccapurple':null" class="fab fa-viber"></i>
        </div>
      </div>
      <div class="chat-box" *ngFor="let item of chats">
        <div class="chat-box-photo">
          <i  class="fas fa-{{item.icon}}" [style.color]="item.title==='Bot'?'darkred':null"></i>
        </div>
        <div class="chat-box-message">
          <div class="chat-box-message-header">
            <label class="title">{{item.title}}</label>
            <label>{{item.time}}</label>
          </div>
          <div class="chat-box-message-text">
            <label>{{item.message}}</label>
            <i class="fab fa-viber"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="dashboard-body-addWidget">
    <app-button
      [btnType]="'icon'"
      [iconName]="'add'"
      [iconSize]="'26px'"
      [bgColor]="'#ddd'"
      [size]="{width: '40px', height: '40px'}"
      (clickButton)="addModalWidget()">
    </app-button>
  </div>
  <ng-container *ngIf="addWidgetModal">
    <app-modal
      (closeModal)="closeModal('addWidgetModal')"
      [showFooter]="false"
      [modalSize]="'middle'"
      [title]="'Add Widget'">
      <div modal-container class="modal-body">
        <div class="dashboard-widgetList">
          <div class="dashboard-widgetList-item" *ngFor="let item of widgets">
            {{item.title}}
            <app-button
              [btnType]="'simple-icon'"
              [iconName]="item.visible ? 'remove' : 'add'"
              [iconSize]="'18px'"
              [size]="{width: '25px', height: '25px'}"
              (clickButton)="insertWidget(item)">
            </app-button>
          </div>
        </div>

      </div>
    </app-modal>
  </ng-container>
  <ng-container *ngIf="addDashboardModal">
    <app-modal
      (closeModal)="closeModal('addDashboardModal')"
      [showFooter]="false"
      [modalSize]="'large'"
      [title]="'Add Dashboard'">
      <div modal-container class="modal-body">
        <div class="dashboard-modal">
          <div class="dashboard-body-menu">
            <div class="dashboard-body-menu-item"
                 *ngFor="let menu of menus" (click)="currentDashboardObj = menu;">
              <label>{{lang.ln(menu.name)}}</label>
              <div class="dashboard-body-menu-subItem"
                   *ngFor="let subMenu of menu.children">
                {{lang.ln(subMenu.name)}}
                <i *ngIf="subMenu.children && subMenu.children.length" class="material-icons">arrow_right</i>
              </div>
            </div>
          </div>

          Name <input [(ngModel)]="dashboardObj.name">
          <app-button btnType="simple" value="Add " (clickButton)="insertDashboardItem()"></app-button>
        </div>
      </div>
    </app-modal>
  </ng-container>
</div>
